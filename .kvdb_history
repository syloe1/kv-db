HELP
MAN PUT
PUT HELP
PUT - HELP
GET HELP
MAN SCAN
EXIT
MAN SNAPSHOT
MAN STATS
MAN HELP
MAN INVALID
EXIT
FLUSH HELP
COMPACT - HELP
DEL HELP
EXIT
HELP
MAN PUT
EXIT
GET HELP
EXIT
SCAN - HELP
EXIT
MAN INVALID
EXIT
PUT user:1 Alice
PUT user:2 Bob
PUT user:3 Charlie
PUT config:timeout 30
PUT config:retries 5
PUT app:name MyApp
PUT app:version 1.0
SCAN user:1 user:9
PREFIX_SCAN user:
PREFIX_SCAN config:
PREFIX_SCAN app:
PREFIX_SCAN nonexistent:
EXIT
MAN PREFIX_SCAN
PREFIX_SCAN HELP
HELP
EXIT
PUT test:a value_a
PUT test:b value_b
PUT test:c value_c
PUT other:x value_x
SNAPSHOT
DEL test:b
PUT test:d value_d
PREFIX_SCAN test:
GET_AT test:b 1
PREFIX_SCAN other:
FLUSH
PREFIX_SCAN test:
EXIT
PUT user:001 User_1
PUT config:setting_001 Value_1
PUT app:module_001 Module_1
PUT user:002 User_2
PUT config:setting_002 Value_2
PUT app:module_002 Module_2
PUT user:003 User_3
PUT config:setting_003 Value_3
PUT app:module_003 Module_3
PUT user:004 User_4
PUT config:setting_004 Value_4
PUT app:module_004 Module_4
PUT user:005 User_5
PUT config:setting_005 Value_5
PUT app:module_005 Module_5
PUT user:006 User_6
PUT config:setting_006 Value_6
PUT app:module_006 Module_6
PUT user:007 User_7
PUT config:setting_007 Value_7
PUT app:module_007 Module_7
PUT user:008 User_8
PUT config:setting_008 Value_8
PUT app:module_008 Module_8
PUT user:009 User_9
PUT config:setting_009 Value_9
PUT app:module_009 Module_9
PUT user:010 User_10
PUT config:setting_010 Value_10
PUT app:module_010 Module_10
PUT user:011 User_11
PUT config:setting_011 Value_11
PUT app:module_011 Module_11
PUT user:012 User_12
PUT config:setting_012 Value_12
PUT app:module_012 Module_12
PUT user:013 User_13
PUT config:setting_013 Value_13
PUT app:module_013 Module_13
PUT user:014 User_14
PUT config:setting_014 Value_14
PUT app:module_014 Module_14
PUT user:015 User_15
PUT config:setting_015 Value_15
PUT app:module_015 Module_15
PUT user:016 User_16
PUT config:setting_016 Value_16
PUT app:module_016 Module_16
PUT user:017 User_17
PUT config:setting_017 Value_17
PUT app:module_017 Module_17
PUT user:018 User_18
PUT config:setting_018 Value_18
PUT app:module_018 Module_18
PUT user:019 User_19
PUT config:setting_019 Value_19
PUT app:module_019 Module_19
PUT user:020 User_20
PUT config:setting_020 Value_20
PUT app:module_020 Module_20
PUT user:021 User_21
PUT config:setting_021 Value_21
PUT app:module_021 Module_21
PUT user:022 User_22
PUT config:setting_022 Value_22
PUT app:module_022 Module_22
PUT user:023 User_23
PUT config:setting_023 Value_23
PUT app:module_023 Module_23
PUT user:024 User_24
PUT config:setting_024 Value_24
PUT app:module_024 Module_24
PUT user:025 User_25
PUT config:setting_025 Value_25
PUT app:module_025 Module_25
PUT user:026 User_26
PUT config:setting_026 Value_26
PUT app:module_026 Module_26
PUT user:027 User_27
PUT config:setting_027 Value_27
PUT app:module_027 Module_27
PUT user:028 User_28
PUT config:setting_028 Value_28
PUT app:module_028 Module_28
PUT user:029 User_29
PUT config:setting_029 Value_29
PUT app:module_029 Module_29
PUT user:030 User_30
PUT config:setting_030 Value_30
PUT app:module_030 Module_30
PUT user:031 User_31
PUT config:setting_031 Value_31
PUT app:module_031 Module_31
PUT user:032 User_32
PUT config:setting_032 Value_32
PUT app:module_032 Module_32
PUT user:033 User_33
PUT config:setting_033 Value_33
PUT app:module_033 Module_33
PUT user:034 User_34
PUT config:setting_034 Value_34
PUT app:module_034 Module_34
PUT user:035 User_35
PUT config:setting_035 Value_35
PUT app:module_035 Module_35
PUT user:036 User_36
PUT config:setting_036 Value_36
PUT app:module_036 Module_36
PUT user:037 User_37
PUT config:setting_037 Value_37
PUT app:module_037 Module_37
PUT user:038 User_38
PUT config:setting_038 Value_38
PUT app:module_038 Module_38
PUT user:039 User_39
PUT config:setting_039 Value_39
PUT app:module_039 Module_39
PUT user:040 User_40
PUT config:setting_040 Value_40
PUT app:module_040 Module_40
PUT user:041 User_41
PUT config:setting_041 Value_41
PUT app:module_041 Module_41
PUT user:042 User_42
PUT config:setting_042 Value_42
PUT app:module_042 Module_42
PUT user:043 User_43
PUT config:setting_043 Value_43
PUT app:module_043 Module_43
PUT user:044 User_44
PUT config:setting_044 Value_44
PUT app:module_044 Module_44
PUT user:045 User_45
PUT config:setting_045 Value_45
PUT app:module_045 Module_45
PUT user:046 User_46
PUT config:setting_046 Value_46
PUT app:module_046 Module_46
PUT user:047 User_47
PUT config:setting_047 Value_47
PUT app:module_047 Module_47
PUT user:048 User_48
PUT config:setting_048 Value_48
PUT app:module_048 Module_48
PUT user:049 User_49
PUT config:setting_049 Value_49
PUT app:module_049 Module_49
PUT user:050 User_50
PUT config:setting_050 Value_50
PUT app:module_050 Module_50
FLUSH
PUT user:051 User_51
PUT config:setting_051 Value_51
PUT user:052 User_52
PUT config:setting_052 Value_52
PUT user:053 User_53
PUT config:setting_053 Value_53
PUT user:054 User_54
PUT config:setting_054 Value_54
PUT user:055 User_55
PUT config:setting_055 Value_55
PUT user:056 User_56
PUT config:setting_056 Value_56
PUT user:057 User_57
PUT config:setting_057 Value_57
PUT user:058 User_58
PUT config:setting_058 Value_58
PUT user:059 User_59
PUT config:setting_059 Value_59
PUT user:060 User_60
PUT config:setting_060 Value_60
PUT user:061 User_61
PUT config:setting_061 Value_61
PUT user:062 User_62
PUT config:setting_062 Value_62
PUT user:063 User_63
PUT config:setting_063 Value_63
PUT user:064 User_64
PUT config:setting_064 Value_64
PUT user:065 User_65
PUT config:setting_065 Value_65
PUT user:066 User_66
PUT config:setting_066 Value_66
PUT user:067 User_67
PUT config:setting_067 Value_67
PUT user:068 User_68
PUT config:setting_068 Value_68
PUT user:069 User_69
PUT config:setting_069 Value_69
PUT user:070 User_70
PUT config:setting_070 Value_70
PUT user:071 User_71
PUT config:setting_071 Value_71
PUT user:072 User_72
PUT config:setting_072 Value_72
PUT user:073 User_73
PUT config:setting_073 Value_73
PUT user:074 User_74
PUT config:setting_074 Value_74
PUT user:075 User_75
PUT config:setting_075 Value_75
PUT user:076 User_76
PUT config:setting_076 Value_76
PUT user:077 User_77
PUT config:setting_077 Value_77
PUT user:078 User_78
PUT config:setting_078 Value_78
PUT user:079 User_79
PUT config:setting_079 Value_79
PUT user:080 User_80
PUT config:setting_080 Value_80
PUT user:081 User_81
PUT config:setting_081 Value_81
PUT user:082 User_82
PUT config:setting_082 Value_82
PUT user:083 User_83
PUT config:setting_083 Value_83
PUT user:084 User_84
PUT config:setting_084 Value_84
PUT user:085 User_85
PUT config:setting_085 Value_85
PUT user:086 User_86
PUT config:setting_086 Value_86
PUT user:087 User_87
PUT config:setting_087 Value_87
PUT user:088 User_88
PUT config:setting_088 Value_88
PUT user:089 User_89
PUT config:setting_089 Value_89
PUT user:090 User_90
PUT config:setting_090 Value_90
PUT user:091 User_91
PUT config:setting_091 Value_91
PUT user:092 User_92
PUT config:setting_092 Value_92
PUT user:093 User_93
PUT config:setting_093 Value_93
PUT user:094 User_94
PUT config:setting_094 Value_94
PUT user:095 User_95
PUT config:setting_095 Value_95
PUT user:096 User_96
PUT config:setting_096 Value_96
PUT user:097 User_97
PUT config:setting_097 Value_97
PUT user:098 User_98
PUT config:setting_098 Value_98
PUT user:099 User_99
PUT config:setting_099 Value_99
PUT user:100 User_100
PUT config:setting_100 Value_100
FLUSH
PREFIX_SCAN user:
PREFIX_SCAN config:
PREFIX_SCAN app:
SCAN user:001 user:999
STATS
LSM
EXIT
HELP
PUT network:test 'Hello Network!'
GET network:test
PUT network:key1 value1
PUT network:key2 value2
SCAN network:key1 network:key2
PREFIX_SCAN network:
STATS
EXIT
START_NETWORK
STOP_NETWORK
HELP
EXIT
# Clean aggregation test
ECHO "=== Testing Aggregation Functions ==="
# Clear any existing data first
ECHO "Clearing existing data..."
# Add test data with numeric values
PUT score:math "95"
PUT score:english "88"
PUT score:science "91"
PUT score:history "82"
PUT user:alice:score "85"
PUT user:bob:score "92"
PUT user:charlie:score "78"
# Test aggregation functions
ECHO "Testing SUM score:*"
SUM score:*
ECHO "Testing AVG score:*"
AVG score:*
ECHO "Testing MIN_MAX score:*"
MIN_MAX score:*
ECHO "Testing SUM user:*:score"
SUM user:*:score
ECHO "Testing AVG user:*:score"
AVG user:*:score
ECHO "Testing MIN_MAX user:*:score"
MIN_MAX user:*:score
# Test SCAN_ORDER with LIMIT only
ECHO "Testing SCAN_ORDER ASC LIMIT 5"
SCAN_ORDER ASC LIMIT 5
ECHO "=== Test Complete ==="
# Debug pattern matching
ECHO "=== Debug Pattern Matching ==="
# Add test data
PUT score:math "95"
PUT score:english "88"
PUT user:alice:score "85"
# Check what data exists
ECHO "All data in database:"
SCAN_ORDER ASC
# Test pattern matching with KEYS command
ECHO "Testing KEYS score:*"
KEYS score:*
ECHO "Testing KEYS user:*"
KEYS user:*
# Test simple aggregation without pattern
ECHO "Testing SUM without pattern (all numeric values)"
SUM
ECHO "=== Debug Complete ==="
# Debug SUM with explicit patterns
ECHO "=== Debug SUM with patterns ==="
# Test SUM with explicit patterns
ECHO "Testing SUM score:*"
SUM score:*
ECHO "Testing SUM user:*:score"
SUM user:*:score
ECHO "Testing SUM with empty pattern"
SUM ""
ECHO "=== Debug Complete ==="
# Debug numeric value detection
ECHO "=== Debug Numeric Values ==="
# Check individual values
GET score:math
GET score:english
GET user:alice:score
# Test if values are being recognized as numeric
ECHO "Testing individual key aggregation:"
SUM score:math
SUM score:english
ECHO "=== Debug Complete ==="
# Clean aggregation test
ECHO "=== Testing Aggregation Functions ==="
# Clear any existing data first
ECHO "Clearing existing data..."
# Add test data with numeric values
PUT score:math "95"
PUT score:english "88"
PUT score:science "91"
PUT score:history "82"
PUT user:alice:score "85"
PUT user:bob:score "92"
PUT user:charlie:score "78"
# Test aggregation functions
ECHO "Testing SUM score:*"
SUM score:*
ECHO "Testing AVG score:*"
AVG score:*
ECHO "Testing MIN_MAX score:*"
MIN_MAX score:*
ECHO "Testing SUM user:*:score"
SUM user:*:score
ECHO "Testing AVG user:*:score"
AVG user:*:score
ECHO "Testing MIN_MAX user:*:score"
MIN_MAX user:*:score
# Test SCAN_ORDER with LIMIT only
ECHO "Testing SCAN_ORDER ASC LIMIT 5"
SCAN_ORDER ASC LIMIT 5
ECHO "=== Test Complete ==="
# Debug SCAN_ORDER
ECHO "=== Debug SCAN_ORDER ==="
# Test different SCAN_ORDER variations
ECHO "Testing SCAN_ORDER ASC (no limit)"
SCAN_ORDER ASC
ECHO "Testing SCAN_ORDER ASC LIMIT 3"
SCAN_ORDER ASC LIMIT 3
ECHO "Testing SCAN_ORDER DESC LIMIT 3"
SCAN_ORDER DESC LIMIT 3
ECHO "=== Debug Complete ==="
# Debug SCAN_ORDER
ECHO "=== Debug SCAN_ORDER ==="
# Test different SCAN_ORDER variations
ECHO "Testing SCAN_ORDER ASC (no limit)"
SCAN_ORDER ASC
ECHO "Testing SCAN_ORDER ASC LIMIT 3"
SCAN_ORDER ASC LIMIT 3
ECHO "Testing SCAN_ORDER DESC LIMIT 3"
SCAN_ORDER DESC LIMIT 3
ECHO "=== Debug Complete ==="
# KVDB 修复功能全面测试脚本
ECHO "=== KVDB 修复功能测试开始 ==="
# 清理之前的数据
ECHO "清理测试环境..."
# 准备测试数据
ECHO "1. 准备测试数据"
PUT user:alice:name "Alice"
PUT user:alice:age "25"
PUT user:alice:score "85"
PUT user:bob:name "Bob"
PUT user:bob:age "30"
PUT user:bob:score "92"
PUT user:charlie:name "Charlie"
PUT user:charlie:age "35"
PUT user:charlie:score "78"
PUT product:laptop:name "Gaming Laptop"
PUT product:laptop:price "1299.99"
PUT product:mouse:name "Wireless Mouse"
PUT product:mouse:price "49.99"
PUT product:keyboard:name "Mechanical Keyboard"
PUT product:keyboard:price "129.99"
PUT score:math "95"
PUT score:english "88"
PUT score:science "91"
PUT score:history "82"
PUT config:timeout "300"
PUT config:max_connections "1000"
# 测试 EXISTS 命令
ECHO "2. 测试 EXISTS 命令"
EXISTS user:alice:name
EXISTS user:nonexistent
EXISTS product:laptop:price
# 测试 KEYS 命令
ECHO "3. 测试 KEYS 命令"
KEYS user:*
KEYS *:name
KEYS score:*
# 测试修复后的 GET_WHERE 命令
ECHO "4. 测试修复后的 GET_WHERE 命令"
GET_WHERE key LIKE user:*
GET_WHERE key = user:alice:name
GET_WHERE value > 50
GET_WHERE key LIKE product:* LIMIT 2
# 测试修复后的聚合函数
ECHO "5. 测试修复后的聚合函数"
SUM score:*
AVG score:*
MIN_MAX score:*
SUM user:*:score
AVG user:*:score
# 测试修复后的有序扫描
ECHO "6. 测试修复后的有序扫描"
SCAN_ORDER ASC LIMIT 5
SCAN_ORDER DESC user:alice user:charlie
SCAN_ORDER ASC score:english score:science
# 测试条件统计
ECHO "7. 测试条件统计"
COUNT
COUNT WHERE key LIKE user:*
COUNT WHERE key LIKE score:*
COUNT WHERE key LIKE product:*
# 测试批量操作（确保仍然工作）
ECHO "8. 测试批量操作"
BATCH PUT test:1 "value1" test:2 "value2" test:3 "value3"
BATCH GET test:1 test:2 test:3
KEYS test:*
BATCH DEL test:1 test:2 test:3
# 测试数据库状态
ECHO "9. 测试数据库状态"
COUNT
STATS
PREFIX_SCAN user:
PREFIX_SCAN score:
# 性能测试
ECHO "10. 快速性能测试"
BENCHMARK C 50 200 1
ECHO "=== 修复功能测试完成 ==="
ECHO "所有核心功能现在应该都能正常工作！"
